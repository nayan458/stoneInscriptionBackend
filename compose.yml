services:
  Auth_Database:
    container_name: auth_database
    image: postgres
    ports:
      - 5432:5432
    environment:
      POSTGRES_PASSWORD: example

  Inscription_Database:
    container_name: chat_database
    image: mongo:latest
    ports:
      - '27017:27017'
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example
    volumes:
      - mongodb_data:/data/db

  localstack:
    image: localstack/localstack
    container_name: localstack
    ports:
      - '4566:4566' # main entrypoint
    environment:
      - SERVICES=s3
      - DEBUG=1
    volumes:
      - './localstack:/var/lib/localstack'

volumes:
  mongodb_data:
    driver: local
# services:
#   Auth_Database:
#     container_name: auth_database
#     image: postgres
#     ports:
#       - 5432:5432
#     environment:
#       POSTGRES_PASSWORD: example
#   mongodb-primary:
#     image: docker.io/bitnami/mongodb:5.0
#     environment:
#       - MONGODB_ADVERTISED_HOSTNAME=mongodb-primary
#       - MONGODB_REPLICA_SET_MODE=primary
#       - MONGODB_ROOT_PASSWORD=password123
#       - MONGODB_REPLICA_SET_KEY=replicasetkey123
#     volumes:
#       - 'mongodb_master_data:/bitnami/mongodb'
#     ports:
#       - '27017:27017'

#   mongodb-secondary:
#     image: docker.io/bitnami/mongodb:5.0
#     depends_on:
#       - mongodb-primary
#     environment:
#       - MONGODB_ADVERTISED_HOSTNAME=mongodb-secondary
#       - MONGODB_REPLICA_SET_MODE=secondary
#       - MONGODB_INITIAL_PRIMARY_HOST=mongodb-primary
#       - MONGODB_INITIAL_PRIMARY_ROOT_PASSWORD=password123
#       - MONGODB_REPLICA_SET_KEY=replicasetkey123

#   mongodb-arbiter:
#     image: docker.io/bitnami/mongodb:5.0
#     depends_on:
#       - mongodb-primary
#     environment:
#       - MONGODB_ADVERTISED_HOSTNAME=mongodb-arbiter
#       - MONGODB_REPLICA_SET_MODE=arbiter
#       - MONGODB_INITIAL_PRIMARY_HOST=mongodb-primary
#       - MONGODB_INITIAL_PRIMARY_ROOT_PASSWORD=password123
#       - MONGODB_REPLICA_SET_KEY=replicasetkey123

# volumes:
#   mongodb_master_data:
#     driver: local
